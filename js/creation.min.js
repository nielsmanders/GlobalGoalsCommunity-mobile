$(document).ready((function(){$("#save").on("click",(function(){var content_id=$(this).attr("data-creationId"),user_id=$(this).attr("data-userId");$(this).hasClass("saved")?$.ajax({url:"includes/ajax.inc.php",method:"POST",async:!1,dataType:"json",data:{action:"unsaveCreation",content_id:content_id,user_id:user_id}}).done((function(data,textStatus,jqXHR){$("#save").toggleClass("saved").toggleClass("btn-orange btn-primary").find("p").html("Opslaan"),$(".saved_count").html(data)})).fail((function(data){alert("Something went wrong...")})):$.ajax({url:"includes/ajax.inc.php",method:"POST",async:!1,dataType:"json",data:{action:"saveCreation",content_id:content_id,user_id:user_id}}).done((function(data,textStatus,jqXHR){$("#save").toggleClass("saved").toggleClass("btn-orange btn-primary").find("p").html("Opgeslagen"),$(".saved_count").html(data)})).fail((function(data){alert("Something went wrong...")}))})),$("#like").on("click",(function(){var content_id=$(this).attr("data-creationId"),user_id=$(this).attr("data-userId");$(this).hasClass("liked")?$.ajax({url:"includes/ajax.inc.php",method:"POST",async:!1,dataType:"json",data:{action:"unlikeCreation",content_id:content_id,user_id:user_id}}).done((function(data,textStatus,jqXHR){$("#like").toggleClass("liked").find("div").html("Like").parent().find("svg").attr("data-prefix","far"),$(".like_count").html(data)})).fail((function(data){console.log(data),alert("Something went wrong...")})):$.ajax({url:"includes/ajax.inc.php",method:"POST",async:!1,dataType:"json",data:{action:"likeCreation",content_id:content_id,user_id:user_id}}).done((function(data,textStatus,jqXHR){$("#like").toggleClass("liked").find("div").html("Liked").parent().find("svg").attr("data-prefix","fas"),$(".like_count").html(data)})).fail((function(data){alert("Something went wrong...")}))})),$("#report").on("click",(function(e){var content_id=$(this).attr("data-creationId"),user_id=$(this).attr("data-userId");$(this).hasClass("reported")||$.ajax({url:"includes/ajax.inc.php",method:"POST",async:!1,dataType:"json",data:{action:"reportCreation",content_id:content_id,user_id:user_id}}).done((function(data,textStatus,jqXHR){$("#report").addClass("reported").find("div").html("Gerapporteerd"),Swal.fire("Gelukt!","Deze creatie is gerapporteerd","success")})).fail((function(data){alert("Something went wrong...")}))})),$("#comment-form").on("submit",(function(e){e.preventDefault();let values=$(this).serializeArray(),emptyValues=[];$.each(values,(function(index,el){el.value||emptyValues.push(el.name)})),emptyValues.length>0?$.each(emptyValues,(function(index,el){$("#"+el).addClass("error")})):$.ajax({url:"includes/ajax.inc.php",method:"POST",async:!1,dataType:"json",data:{action:"comment",content_id:values.find(x=>"content_id"===x.name).value,title:values.find(x=>"title"===x.name).value,content:values.find(x=>"content"===x.name).value}}).done((function(data,textStatus,jqXHR){1===data?location.reload():console.log(data)})).fail((function(data){console.log(data)}))})),$(".like-comment").on("click",(function(){let comment=$(this);var comment_id=comment.attr("data-commentId"),comment_user=comment.attr("data-commentUser"),user_id=comment.attr("data-userId");comment_user!=user_id&&0!=user_id&&(comment.hasClass("liked")?$.ajax({url:"includes/ajax.inc.php",method:"POST",async:!1,dataType:"json",data:{action:"unlikeComment",comment_id:comment_id,user_id:user_id}}).done((function(data,textStatus,jqXHR){comment.toggleClass("liked").html("<i class='fas fa-heart mr-10'></i>"+data)})).fail((function(data){alert("Something went wrong...")})):$.ajax({url:"includes/ajax.inc.php",method:"POST",async:!1,dataType:"json",data:{action:"likeComment",comment_id:comment_id,user_id:user_id}}).done((function(data,textStatus,jqXHR){comment.toggleClass("liked").html("<i class='fas fa-heart mr-10'></i>"+data)})).fail((function(data){alert("Something went wrong...")})))})),$("#share").on("click",(function(){var success=!0,range=document.createRange(),selection,tmpElem=$("<div>");tmpElem.css({position:"absolute",left:"-1000px",top:"-1000px"}),tmpElem.text(window.location.href),$("body").append(tmpElem),range.selectNodeContents(tmpElem.get(0)),(selection=window.getSelection()).removeAllRanges(),selection.addRange(range);try{success=document.execCommand("copy",!1,null)}catch(e){copyToClipboardFF(window.location.href)}success&&(Swal.fire("Gelukt!","Deelbare link gekopiÃ«erd!","success"),tmpElem.remove())})),setTimeout((function(){var creation_id=$("#creation-id").html();$.ajax({url:"includes/ajax.inc.php",method:"POST",async:!1,dataType:"json",data:{action:"viewCreation",creation_id:creation_id}}).done((function(data,textStatus,jqXHR){$(".view_count").html(data)})).fail((function(data){console.log("Creation views can't be updated...")}))}),1e4)}));