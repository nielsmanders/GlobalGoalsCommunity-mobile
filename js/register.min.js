$(document).ready((function(){$("#register-form :input").on("keydown",(function(){"passwordRepeat"!==$(this).attr("name")&&$(this).removeClass("error")})),$("#acceptTerms").on("change",(function(){this.checked&&$(this).parent().removeClass("error")})),$("#passwordRepeat").on("keyup",(function(){let password=$("#password").val(),passwordRepeat=$("#passwordRepeat").val();password&&(password!==passwordRepeat?$(this).hasClass("error")||$(this).addClass("error"):$(this).hasClass("error")&&$(this).removeClass("error"))})),$("#register-form").on("submit",(function(e){e.preventDefault();let values=$(this).serializeArray(),emptyValues=[];if($.each(values,(function(index,el){el.value||emptyValues.push(el.name)})),emptyValues.length>0)$.each(emptyValues,(function(index,el){$("#"+el).addClass("error")}));else{let password,passwordRepeat;if(values.find(x=>"password"===x.name).value!==values.find(x=>"passwordRepeat"===x.name).value)$("#passwordRepeat").addClass("error");else{let acceptTerms;if(values.find(x=>"acceptTerms"===x.name)){let newsletter=values.find(x=>"newsletter"===x.name);newsletter=newsletter?1:0,$.ajax({url:"includes/ajax.inc.php",method:"POST",async:!1,dataType:"json",data:{action:"register",firstname:values.find(x=>"firstname"===x.name).value,lastname:values.find(x=>"lastname"===x.name).value,email:values.find(x=>"email"===x.name).value,phone:values.find(x=>"phone"===x.name).value,password:values.find(x=>"password"===x.name).value,newsletter:newsletter}}).done((function(data,textStatus,jqXHR){1===data?location.href="/login/":console.log(data)})).fail((function(data){console.log(data)}))}else $("#acceptTerms").parent().addClass("error")}}}))}));